<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bookMapper">

	<select id="selectBookList" parameterType="string" resultType="Book">
		 SELECT ROWNUM, A.*
         FROM (SELECT B.*, BI.CHANGEFILENAME 
                FROM BOOK B, BOOKIMAGES BI
                WHERE B.BOOKNO = BI.BOOKNO AND BI.FILELEVEL= 0 AND TYPE = #{TYPE}
                ORDER BY B.CREDATE DESC, B.BOOKNO DESC) A
	</select>
	
	<select id="selectBookTotalContents" parameterType="string" resultType="_int">
		SELECT COUNT(*) FROM BOOK WHERE TYPE = #{TYPE}
	</select>
	
	<select id="selectOneBook" parameterType="_int" resultType="Book">
		SELECT * FROM BOOK WHERE BOOKNO = #{bookNo}
	</select>
	
	<select id="selectOneBookImages" parameterType="_int" resultType="BookImages">
		SELECT * FROM BOOKIMAGES WHERE BOOKNO = #{bookNo}
	</select>
	
	<select id="selectOneQuickList" parameterType="_int" resultType="Book">
		SELECT B.*, BI.CHANGEFILENAME 
        FROM BOOK B, BOOKIMAGES BI
        WHERE B.BOOKNO = BI.BOOKNO AND BI.FILELEVEL= 0 AND B.BOOKNO = #{bookNo}
        ORDER BY B.CREDATE DESC, B.BOOKNO DESC
	</select>
	
</mapper>